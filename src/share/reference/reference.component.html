<div x-dialog-content class="ns-reference-content">
  <ng-container *ngTemplateOutlet="typeChild; context: { prop: prop() }"></ng-container>

  <ng-template #typeChild let-prop="prop" let-excludeTitle="excludeTitle">
    @if (prop) {
      @if (prop.type === 'type') {
        <div class="property">
          @if (!excludeTitle) {
            <ng-container *ngTemplateOutlet="typeTitle; context: { prop }"></ng-container>
          }
          @if (prop.children && prop.children.length > 0) {
            <div class="children">
              <x-collapse bordered>
                @for (child of prop.children; track child) {
                  <x-collapse-panel [label]="labelTpl">
                    <ng-container
                      *ngTemplateOutlet="typeChild; context: { prop: child, excludeTitle: true }"
                    ></ng-container>
                    <ng-template #labelTpl>
                      <ng-container
                        *ngTemplateOutlet="typeTitle; context: { prop: child, isChildren: true }"
                      ></ng-container>
                    </ng-template>
                  </x-collapse-panel>
                }
              </x-collapse>
            </div>
          }
          @if (prop.actualValue) {
            <div class="value">
              @for (val of prop.actualValue; track val) {
                <code>{{ val }}{{ $last ? '' : ' | ' }}</code>
              }
            </div>
          }
          @if (prop.extends) {
            <div class="extends"><span>extends</span><code [innerText]="prop.extends"></code></div>
          }
          @if (prop.description) {
            <div class="description app-markdown" [innerHTML]="prop.description"></div>
          }
          @if (prop.example) {
            <div class="example app-markdown" [innerHTML]="prop.example"></div>
          }
        </div>
      } @else if (prop.type === 'interface') {
        <div class="property">
          <ng-container *ngTemplateOutlet="typeTitle; context: { prop }"></ng-container>
        </div>
      } @else if (prop.type === 'group') {
        @for (child of prop.children; track child.name) {
          <ng-container *ngTemplateOutlet="typeChild; context: { prop: child }"></ng-container>
        }
      }
    }
  </ng-template>

  <ng-template #typeTitle let-prop="prop" let-isChildren="isChildren">
    <div class="label">
      <code [innerText]="prop.name"></code>
      <span class="type">{{ prop.type }}</span>
      <span>{{ prop.label }}</span>
    </div>
  </ng-template>
</div>
<div class="ns-reference-close">
  <x-button x-dialog-close plain circle icon="fto-x"></x-button>
</div>
