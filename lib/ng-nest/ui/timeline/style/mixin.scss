// Timeline

@use 'sass:math';
@use '../../style/params/index.scss' as *;
@use './param.scss' as *;

@mixin timeline {
  & {
    display: block;
  }
  ul,
  li {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  > ul {
    padding-left: math.div($x-timeline-icon-width, 2) - math.div($x-timeline-line-width, 2);
    > li {
      position: relative;
      &:not(:last-child) {
        padding-bottom: 1rem;
      }
      &:last-child {
        .#{$x-timeline-prefix}-tail {
          border-left-color: transparent;
        }
      }
      &:first-child {
        .#{$x-timeline-prefix}-tail {
          top: 1.25rem;
        }
      }
    }
  }
  &-tail {
    position: absolute;
    height: 100%;
    border-left: $x-timeline-line-width solid $x-border;
    &-dashed {
      border-left-style: dashed;
    }
  }
  &-icon {
    position: absolute;
    background-color: $x-border;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: $x-white;
    width: $x-timeline-icon-width;
    height: $x-timeline-icon-width;
    border: 0.0625rem solid $x-background-100;
  }
  &-wrapper {
    position: relative;
  }
  &-label {
    display: flex;
    align-items: center;
    margin-bottom: 0.125rem;
    > x-link {
      margin-right: 0.325rem;
    }
  }
  &-content {
    color: $x-text-300;
  }
  &-time {
    font-size: $x-font-size;
    color: $x-text-400;
  }
  &-loading {
    .#{$x-timeline-prefix}-icon {
      color: $x-text-400;
      font-size: 1.25rem;
      background-color: transparent !important;
    }
  }
  &-number {
    .#{$x-timeline-prefix}-icon {
      background-color: $x-background-a900;
    }
  }

  @include type('primary', $x-primary);
  @include type('success', $x-success);
  @include type('warning', $x-warning);
  @include type('danger', $x-danger);
  @include type('info', $x-info);

  @include size('big', $x-height-big);
  @include size('large', $x-height-large);
  @include size('medium', $x-height-medium);
  @include size('small', $x-height-small);
  @include size('mini', $x-height-mini);

  &-right {
    .#{$x-timeline-prefix} {
      &-tail {
        right: 0;
      }
      &-label {
        justify-content: flex-end;
      }
      &-content {
        text-align: right;
      }
    }
  }

  &-alternate {
    .#{$x-timeline-prefix} {
      &-icon {
        left: 50%;
      }
      &-tail {
        left: 50%;
      }
    }
    > ul > li {
      &:nth-child(odd) {
        .#{$x-timeline-prefix} {
          &-wrapper {
            width: 50%;
            text-align: right;
          }
          &-label {
            justify-content: flex-end;
          }
          &-content {
            text-align: right;
          }
        }
      }
      &:nth-child(even) {
        .#{$x-timeline-prefix} {
          &-wrapper {
            left: 50%;
            width: 50%;
          }
        }
      }
    }
  }
}

@mixin type($type, $background-color) {
  &-#{$type} {
    background-color: $background-color;
  }
}

@mixin size($size, $iconSize) {
  &-#{$size} {
    .#{$x-timeline-prefix}-label {
      line-height: calc(#{$iconSize} - 0.5rem);
    }
    .#{$x-timeline-prefix}-wrapper {
      padding-left: calc(#{$iconSize} - 0.5rem);
    }
    .#{$x-timeline-prefix}-icon {
      width: calc(#{$iconSize} - 0.5rem);
      height: calc(#{$iconSize} - 0.5rem);
    }
    &.#{$x-timeline-prefix}-left {
      .#{$x-timeline-prefix}-icon {
        left: calc(math.div($x-timeline-line-width, 2) - calc(calc(#{$iconSize} - 0.5rem) * 0.5));
      }
      .#{$x-timeline-prefix}-wrapper {
        padding-left: calc(#{$iconSize} - 0.5rem);
      }
    }
    &.#{$x-timeline-prefix}-right {
      .#{$x-timeline-prefix}-icon {
        right: calc(math.div($x-timeline-line-width, 2) - calc(calc(#{$iconSize} - 0.5rem) * 0.5));
      }
      .#{$x-timeline-prefix}-wrapper {
        padding-right: calc(#{$iconSize} - 0.5rem);
        text-align: right;
      }
    }
    &.#{$x-timeline-prefix}-alternate {
      .#{$x-timeline-prefix}-icon {
        margin-left: calc(math.div($x-timeline-line-width, 2) - calc(calc(#{$iconSize} - 0.5rem) * 0.5));
      }
      .#{$x-timeline-prefix}-tail {
        margin-left: 0 - math.div($x-timeline-line-width, 2);
      }
      > ul > li {
        &:nth-child(odd) {
          .#{$x-timeline-prefix}-wrapper {
            padding-right: calc(#{$iconSize} - 0.5rem);
          }
        }
        &:nth-child(even) {
          .#{$x-timeline-prefix}-wrapper {
            padding-left: calc(#{$iconSize} - 0.5rem);
          }
        }
      }
    }
  }
}
