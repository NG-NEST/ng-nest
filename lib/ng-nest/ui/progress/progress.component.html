<div class="x-progress" [ngClass]="classMap" [class.x-progress-steps]="stepsArray.length > 0">
  <div class="x-progress-track" *ngIf="stepsArray.length === 0">
    <div class="x-progress-rail">
      <div
        class="x-progress-bg"
        [style.width.%]="percent"
        [style.background-color]="currentColor"
        [style.background-image]="linearGradient"
        [style.height]="height"
        [style.line-height]="height"
      >
        <span *ngIf="inside">{{ percent }}%</span>
      </div>
    </div>
  </div>
  <ng-container *ngIf="stepsArray.length > 0">
    <div
      *ngFor="let step of stepsArray"
      class="x-progress-step"
      [class.x-progress-step-active]="step"
      [style.background-color]="currentColor"
      [style.width]="stepWidth"
      [style.flex]="stepFlex ? 1 : 'none'"
      [style.height]="height"
      [style.line-height]="height"
    ></div>
  </ng-container>
  <span class="x-progress-text" *ngIf="info && !inside" [ngSwitch]="status">
    <ng-container *ngSwitchCase="'success'">
      <x-icon type="fto-check-circle"></x-icon>
    </ng-container>
    <ng-container *ngSwitchCase="'exception'">
      <x-icon type="fto-x-circle"></x-icon>
    </ng-container>
    <ng-container *ngSwitchCase="'warning'">
      <x-icon type="fto-help-circle"></x-icon>
    </ng-container>
    <ng-container *ngSwitchDefault>
      <ng-container *ngIf="format; else defaultTemp">{{ onFormat(percent) }}</ng-container>
      <ng-template #defaultTemp>{{ percent }}%</ng-template>
    </ng-container>
  </span>
</div>
