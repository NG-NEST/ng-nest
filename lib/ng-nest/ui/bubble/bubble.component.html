<div class="x-bubble" [ngClass]="classMap()">
  @if (!!avatar()) {
    <div class="x-bubble-avatar" [class.x-bubble-avatar-hidden]="avatar()?.hidden">
      <x-avatar
        [icon]="avatar()?.icon!"
        [label]="avatar()?.label!"
        [src]="avatar()?.src!"
        [size]="avatar()?.size ?? size()"
        [gap]="avatar()?.gap ?? '0.25rem'"
        [fit]="avatar()?.fit ?? 'cover'"
        [backgroundColor]="avatar()?.backgroundColor ?? '#999999'"
        [color]="avatar()?.color ?? '#FFFFFF'"
        [shape]="avatar()?.shape ?? 'circle'"
      ></x-avatar>
    </div>
  }
  <div class="x-bubble-wrapper">
    @if (loading()) {
      <div class="x-bubble-content" [x-loading]="true" [size]="'small'" inline></div>
    } @else {
      @if (header()) {
        <div class="x-bubble-header">
          <ng-container *xOutlet="header()">{{ header() }}</ng-container>
        </div>
      }
      @if (isString()) {
        <div class="x-bubble-content" #contentRef [innerHTML]="renderedContent"></div>
      } @else if (isTemplate()) {
        <div class="x-bubble-content" #contentRef>
          <ng-container *xOutlet="content()"></ng-container>
        </div>
      }
      @if (footer()) {
        <div class="x-bubble-footer">
          <ng-container *xOutlet="footer()">{{ footer() }}</ng-container>
        </div>
      }
    }
  </div>
</div>
