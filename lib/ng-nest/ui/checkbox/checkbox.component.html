<div
  #checkbox
  class="x-checkbox"
  [class.x-flex]="justify || align || direction"
  [class.x-disabled]="disabled"
  [class.x-required]="requiredIsEmpty"
  [class.x-invalid]="invalid"
  [class.x-checkbox-button]="button"
  [class.x-checkbox-icon]="icon"
  [class.x-checkbox-after]="after"
  [class.x-checkbox-before]="before"
  [class.x-checkbox-after-template]="afterIsTemplate"
  [class.x-checkbox-before-template]="beforeIsTemplate"
>
  <label *ngIf="label" [class.x-checkbox-label-required]="required" [style.width]="labelWidth" [ngClass]="labelMap">{{ label }}</label>
  <div class="x-checkbox-row">
    <div class="x-checkbox-row-before" *ngIf="before">
      <ng-container *xOutlet="before">{{ before }}</ng-container>
    </div>
    <div class="x-checkbox-row-list">
      <ng-container *ngIf="button || icon; else default">
        <x-buttons>
          <x-button
            *ngFor="let item of nodes; trackBy: trackByItem"
            [icon]="item.icon"
            [title]="item.title"
            [size]="size"
            [activated]="getChecked(item.id)"
            [disabled]="getDisabled(item.disabled)"
            attrType="button"
            (click)="checkboxClick($event, item)"
            >{{ item.label }}</x-button
          >
        </x-buttons>
      </ng-container>
    </div>
    <div class="x-checkbox-row-after" *ngIf="after">
      <ng-container *xOutlet="after">{{ after }}</ng-container>
    </div>
  </div>
</div>

<ng-template #default>
  <div
    class="x-checkbox-row-item"
    *ngFor="let item of nodes; trackBy: trackByItem"
    [class.x-checked]="getChecked(item.id)"
    [class.x-disabled]="disabled || item.disabled"
    [class.x-indeterminate]="indeterminate"
    (click)="checkboxClick($event, item)"
  >
    <span class="x-checkbox-box"></span>
    <span class="x-checkbox-label">
      <ng-container *xOutlet="item.label; context: { $node: item }">{{ item.label }}</ng-container>
    </span>
  </div>
</ng-template>
