<div class="x-picker-date" [class.x-date-picker-datetemp]="dateTemp">
  <div class="x-picker-date-header" *ngIf="showHeader">
    <x-button icon="fto-chevrons-left" size="small" onlyIcon (click)="nextYear(-1)" [class.x-visibility]="!lastYearBtn"></x-button>
    <x-button icon="fto-chevron-left" size="small" onlyIcon (click)="nextMonth(-1)" [class.x-visibility]="!lastMonthBtn"></x-button>
    <div class="x-picker-date-year-month">
      <x-button type="text" size="small" (click)="typeOnChange('year')">{{ display | date : 'yyyy' }}{{ locale.year }}</x-button>
      <x-button type="text" size="small" (click)="typeOnChange('month')">{{ getLocaleMonth(display) }}</x-button>
    </div>
    <x-button icon="fto-chevron-right" size="small" onlyIcon (click)="nextMonth(1)" [class.x-visibility]="!nextYearBtn"></x-button>
    <x-button icon="fto-chevrons-right" size="small" onlyIcon (click)="nextYear(1)" [class.x-visibility]="!nextMonthBtn"></x-button>
  </div>
  <div class="x-picker-date-body">
    <table cellspacing="0" cellpadding="0">
      <thead>
        <tr>
          <th *ngFor="let title of titles; trackBy: trackByNode">{{ title | xI18n }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let weeks of weekDates">
          <ng-container *ngFor="let week of weeks; trackBy: trackByNode">
            <td
              [class.x-date-last-or-next]="week.isLastOrNext"
              [class.x-date-now]="week.isNow"
              [class.x-date-first-day]="week.isFirstDay"
              [class.x-date-last-day]="week.isLastDay"
              [class.x-date-range-start]="rangePicker && isStartDate(week.date!)"
              [class.x-date-range-end]="rangePicker && isEndDate(week.date!)"
              [class.x-date-range-start-left]="rangePicker && week.isRangeStartLeft"
              [class.x-date-range-start-right]="rangePicker && week.isRangeStartRight"
              [class.x-date-range-end-left]="rangePicker && week.isRangeEndLeft"
              [class.x-date-range-end-right]="rangePicker && week.isRangeEndRight"
              [class.x-date-range-hover]="rangePicker && week.isRangeHover"
              [class.x-date-range-hover-start-left]="rangePicker && week.isRangeHoverStartLeft"
              [class.x-date-range-hover-start-right]="rangePicker && week.isRangeHoverStartRight"
              [class.x-date-range-hover-end-left]="rangePicker && week.isRangeHoverEndLeft"
              [class.x-date-range-hover-end-right]="rangePicker && week.isRangeHoverEndRight"
              [class.x-date-range-hover-start]="rangePicker && week.isRangeHoverStart"
              [class.x-date-range-hover-end]="rangePicker && week.isRangeHoverEnd"
              [class.x-date-in-range]="rangePicker && week.isInRange"
              [class.x-date-in-range-hover]="rangePicker && week.isInRangeHover"
              [class.x-date-active]="!rangePicker && (week.date | date : 'yyyyMMdd') === (model | date : 'yyyyMMdd')"
              title="{{ week.date | date : 'yyyy-MM-dd' }}"
              (click)="dateClick(week)"
              (mouseenter)="rangePicker && onTdMouseenter(week)"
              (mouseleave)="rangePicker && onTdMouseleave(week)"
            >
              <div *ngIf="!dateTemp" class="x-date-text">
                {{ week.date | date : 'd' }}
              </div>
              <ng-container *ngIf="dateTemp">
                <ng-container *ngTemplateOutlet="dateTemp; context: { date$: week.date }"></ng-container>
              </ng-container>
            </td>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>
</div>
