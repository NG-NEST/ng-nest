// DatePicker

@import '../../style/themes/default';
@import '../../style/mixins/index';
@import './param';

@mixin date-picker {
  width: 100%;
  x-input {
    width: 100%;
  }
}

@mixin date-picker-portal {
  $prefix: $--x-date-picker-portal-prefix;
  margin: 0.0625rem 0;
  font-size: $--x-date-picker-font-size;
  color: $--x-text;
  border: $--x-date-picker-border;
  border-radius: $--x-border-radius;
  box-shadow: $--x-box-shadow-light;
  background-color: $--x-background;
  width: 16rem;
  display: flex;
  flex-direction: column;
  font-size: $--x-font-size-small;
  &.date-time {
    width: 27rem;
  }
  &.date-hour {
    width: 19.75rem;
  }
  &.date-minute {
    width: 23.375rem;
  }
  &-content {
    display: flex;
  }
  &-preset {
    display: flex;
    align-items: center;
    justify-content: center;
    border-top: $--x-border-width solid $--x-border;
    > x-button {
      flex: 1;
    }
  }
  &-body {
    padding: 0.4rem;
  }
  &-footer {
    display: flex;
    justify-content: flex-end;
    border-top: $--x-date-picker-border;
    padding: 0.5rem;
  }
  &-date {
    flex: 1;
  }
  &-time {
    display: flex;
    flex-direction: column;
    border-left: $--x-date-picker-border;
    &-label {
      padding: 0.5rem;
      text-align: center;
      border-bottom: $--x-date-picker-border;
    }
    .x-time-picker-frame {
      border-width: 0;
      box-shadow: none;
      margin: 0;
    }
  }
}

@mixin picker-date {
  &-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem;
    border-bottom: $--x-border-width solid $--x-border;
  }
  &-year-month {
    flex: 1;
    text-align: center;
  }
  &-body {
    padding: 0.5rem;
    > table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      th {
        font-weight: 400;
        height: 2rem;
        color: $--x-text-400;
      }
      td {
        padding: 0.25rem 0;
        text-align: center;
        cursor: pointer;
        color: $--x-text-300;
        position: relative;
        .x-date-text {
          width: 1.75rem;
          height: 1.5rem;
          margin: 0 auto;
          border: $--x-border-width $--x-border-style transparent;
          border-radius: $--x-border-radius;
          transition: $--x-animation-duration-base;
          position: relative;
        }
        &::before,
        &::after {
          position: absolute;
          top: 50%;
          right: 0;
          left: 0;
          z-index: 1;
          height: 1.5rem;
          border: $--x-border-width dashed transparent;
          transform: translate(0, -50%);
          transition: $--x-animation-duration-base;
          content: '';
        }
        &:hover:not(.x-date-in-range) {
          .x-date-text {
            background-color: $--x-background-a200;
          }
        }
        &.x-date-active:not(.x-date-last-or-next),
        &.x-date-range-start:not(.x-date-last-or-next),
        &.x-date-range-end:not(.x-date-last-or-next) {
          color: $--x-background-100;
          .x-date-text {
            background-color: $--x-primary;
            border-color: $--x-primary;
          }
          &:hover {
            color: $--x-background-100;
            .x-date-text {
              background-color: $--x-primary;
            }
          }
        }
        &.x-date-range-end-left:not(.x-date-last-or-next):not(.x-date-first-day):not(:first-child) {
          .x-date-text {
            z-index: 1;
          }
          &::after {
            background-color: $--x-primary-800;
            transform: translate(-0.25rem, -50%);
            border-radius: $--x-border-radius;
            z-index: 0;
          }
          &.x-date-in-range-hover {
            &::after {
              background-color: $--x-primary-700;
            }
          }
        }
        &.x-date-range-start-right:not(.x-date-last-or-next):not(.x-date-last-day):not(:last-child) {
          .x-date-text {
            z-index: 1;
          }
          &::after {
            background-color: $--x-primary-800;
            transform: translate(0.25rem, -50%);
            border-radius: $--x-border-radius;
            z-index: 0;
          }
          &.x-date-in-range-hover {
            &::after {
              background-color: $--x-primary-700;
            }
          }
        }
        &.x-date-in-range:not(.x-date-range-start):not(.x-date-range-end):not(.x-date-last-or-next) {
          .x-date-text {
            position: relative;
            z-index: 1;
          }
          &::before {
            background-color: $--x-primary-800;
            z-index: 0;
          }
          &:first-child {
            &::before {
              transform: translate(0.25rem, -50%);
            }
          }
          &:last-child {
            &::before {
              transform: translate(-0.25rem, -50%);
            }
          }
          &.x-date-in-range-hover {
            &-left::before {
              transform: translate(-0.25rem, -50%);
            }
            &-right::before {
              transform: translate(0.25rem, -50%);
            }
            &::before {
              background-color: $--x-primary-700;
            }
          }
        }
        &.x-date-last-or-next {
          color: $--x-text-700;
        }
        &.x-date-range-hover {
          &:not(.x-date-last-or-next)::before {
            border-color: $--x-primary;
            border-left-color: transparent;
            border-right-color: transparent;
            transform: translate(-0.25rem, -50%);
          }
          &:first-child:not(.x-date-last-or-next),
          &.x-date-first-day {
            &::before {
              border-left-color: $--x-primary;
              transform: translate(0.25rem, -50%);
            }
            &.x-date-range-hover-end {
              &::before {
                width: 1.75rem;
                transform: translate(0.25rem, -50%);
              }
            }
          }
          &:last-child:not(.x-date-last-or-next),
          &.x-date-last-day {
            &::before {
              border-right-color: $--x-primary;
              transform: translate(-0.25rem, -50%);
            }
            &.x-date-range-hover-start {
              &::before {
                width: 1.75rem;
                transform: translate(0.25rem, -50%);
              }
            }
          }
          &-start:not(.x-date-last-or-next) {
            &::before {
              border-left-color: $--x-primary;
              transform: translate(0.25rem, -50%);
            }
          }
          &.x-date-range-hover-start:not(.x-date-last-or-next) {
            &::before {
              transform: translate(0.25rem, -50%);
            }
          }
          &-end:not(.x-date-last-or-next) {
            &::before {
              border-right-color: $--x-primary;
              transform: translate(-0.25rem, -50%);
            }
          }
          &-start-left:not(:first-child):not(.x-date-last-or-next):not(.x-date-first-day),
          &-end-left:not(:first-child):not(.x-date-last-or-next):not(.x-date-first-day) {
            &::before {
              border-top-color: $--x-primary;
              border-bottom-color: $--x-primary;
              transform: translate(-0.3125rem, -50%);
            }
          }
          &-start-right:not(:last-child):not(.x-date-last-or-next):not(.x-date-last-day),
          &-end-right:not(:last-child):not(.x-date-last-or-next):not(.x-date-last-day) {
            &::before {
              border-top-color: $--x-primary;
              border-bottom-color: $--x-primary;
              transform: translate(0.3125rem, -50%);
            }
          }
        }
        &.x-date-now:not(.x-date-active):not(.x-date-range-start):not(.x-date-range-end):not(.x-date-last-or-next) .x-date-text {
          color: $--x-primary;
          border-color: $--x-primary;
        }
      }
    }
  }
  .x-visibility {
    visibility: hidden;
  }
}

@mixin picker-month {
  &-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem;
    border-bottom: $--x-border-width solid $--x-border;
  }
  &-year-month {
    flex: 1;
    text-align: center;
  }
  &-body {
    padding: 0.5rem;
    > table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      td {
        padding: 0.125rem 0;
        text-align: center;
        x-button .x-button {
          width: 3.5rem;
          height: 3.25rem;
          margin: 0 auto;
          border: 0.0625rem solid transparent;
          &:hover {
            background-color: $--x-primary-900;
          }
          &-activated {
            color: $--x-background-100;
            background-color: $--x-primary;
            &:hover {
              color: $--x-background-100;
              background-color: $--x-primary;
            }
          }
        }
        &.x-date-last-or-next x-button .x-button {
          color: $--x-text-700;
        }
        &.x-date-now x-button .x-button:not(.x-button-activated) {
          color: $--x-primary;
          background-color: transparent;
          border-color: $--x-primary;
        }
      }
    }
  }
}

@mixin picker-year {
  &-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem;
    border-bottom: $--x-border-width solid $--x-border;
  }
  &-year-month {
    flex: 1;
    text-align: center;
  }
  &-body {
    padding: 0.5rem;
    > table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      td {
        padding: 0.125rem 0;
        text-align: center;
        x-button .x-button {
          width: 3.5rem;
          height: 3.25rem;
          margin: 0 auto;
          border: 0.0625rem solid transparent;
          &:hover {
            background-color: $--x-primary-900;
          }
          &-activated {
            color: $--x-background-100;
            background-color: $--x-primary;
            &:hover {
              color: $--x-background-100;
              background-color: $--x-primary;
            }
          }
        }
        &.x-date-last-or-next x-button .x-button {
          color: $--x-text-700;
        }
        &.x-date-now x-button .x-button:not(.x-button-activated) {
          color: $--x-primary;
          background-color: transparent;
          border-color: $--x-primary;
        }
      }
    }
  }
}

@mixin date-range {
  width: 100%;
  &-row {
    flex: 1;
    display: flex;
    align-items: center;
  }
  &-group {
    display: inline-flex;
    flex: 1;
    width: 100%;
    font-size: $--x-date-picker-font-size;
    background-color: $--x-date-picker-background-color;
    background-image: none;
    border: $--x-date-picker-border;
    border-radius: $--x-date-picker-border-radius;
    box-shadow: $--x-date-picker-box-shadow;
    transition: all $--x-animation-duration-slow;
    .x-input-group {
      display: flex;
      align-items: center;
      position: relative;
      .x-date-range-icon {
        color: $--x-text-400;
        transition: all $--x-animation-duration-base;
        z-index: 2;
        font-size: 1rem;
        width: 1.8rem;
      }
      > x-input {
        input {
          padding-left: 0 !important;
          padding-right: 0 !important;
          background-color: transparent;
          margin-left: 0.4rem;
          margin-right: 0.4rem;
          border-radius: 0;
        }
        &.x-data-range-input-start {
          width: 6rem;
        }
        &.x-data-range-input-end {
          width: 7.8rem;
        }
      }
    }
    &:hover {
      @include hover();
    }
  }
  &-active-bar {
    position: absolute;
    height: 0.125rem;
    margin-left: 0.4rem;
    bottom: -0.0625rem;
    width: calc(50% - 2.2rem);
    background-color: $--x-primary;
    transition: $--x-animation-duration-base;
  }
  &-active {
    .x-date-range-group {
      @include focus();
    }
  }
  &-active-start {
    .#{$--x-date-range-prefix} {
      &-active-bar {
        left: 0;
      }
    }
  }
  &-active-end {
    .#{$--x-date-range-prefix} {
      &-active-bar {
        left: 50%;
      }
    }
  }
}

@mixin date-range-portal {
  $prefix: $--x-date-range-portal-prefix;
  margin: 0.0625rem 0;
  font-size: $--x-date-picker-font-size;
  color: $--x-text;
  border: $--x-date-picker-border;
  border-radius: $--x-border-radius;
  box-shadow: $--x-box-shadow-light;
  background-color: $--x-background;
  width: 34rem;
  display: flex;
  flex-direction: column;
  font-size: $--x-font-size-small;
  &.date-time {
    width: 27rem;
  }
  &.date-hour {
    width: 19.75rem;
  }
  &.date-minute {
    width: 23.375rem;
  }
  &-content {
    display: flex;
  }
  &-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.4rem;
    border-bottom: $--x-border-width solid $--x-border;
  }
  &-preset {
    display: flex;
    align-items: center;
    justify-content: center;
    border-top: $--x-border-width solid $--x-border;
    > x-button {
      flex: 1;
    }
  }
  &-year-month {
    flex: 1;
    text-align: center;
  }
  &-body {
    display: flex;
  }
  &-start {
    flex: 1;
  }
  &-end {
    flex: 1;
  }
  &-footer {
    display: flex;
    justify-content: flex-end;
    border-top: $--x-date-picker-border;
    padding: 0.5rem;
  }
  &-date {
    flex: 1;
  }
  &-time {
    display: flex;
    flex-direction: column;
    &-label {
      padding: 0.4rem;
      text-align: center;
      border-left: $--x-date-picker-border;
    }
    .x-time-picker-frame {
      border-width: $--x-border-width 0 0 $--x-border-width;
      box-shadow: none;
    }
  }
}
